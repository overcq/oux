#!/bin/sh
################################################################################
#   ___   publicplace
#  ¦OUX¦  “sh”
#  ¦Inc¦  compile
#   ---   ‟Coux”
#         “.cx” to “.h” utility for system headers
# ©overcq                on ‟Gentoo Linux 17.0” “x86_64”            2018‒11‒12 b
################################################################################
headers_db="$1"
cx_source="$2"
#===============================================================================
awk '
    {   if( system( "grep -qEe \"(^|[^0-9A-Za-z_])" $1 "\\(\" \"'"$cx_source"'\"" ) == 0 )
        {   pos = index( $0, " " )
            line = substr( $0, pos + 1 )
            split( line, a )
            for( e in a )
                print "#include <" a[e] ">"
        }
    }
' < "$headers_db" \
| sort -u
################################################################################
